## Forta setup guide
### Form for request to be a node validatro (it`s closed on this moment):
```https://docs.google.com/forms/d/e/1FAIpQLSfO1D7NLUcv-FsYKMcUlVwTUXAdmFraXqnXsmUA_qkSR2d79A/viewform?pli=1```

### Installation tutorial: I decided start it ont lilght client for Ethereum network (not full node)


1. Install the light client for Ethereum network, I used this one:
https://geth.ethereum.org/docs/install-and-build/installing-geth#run-inside-docker-container
```
# docker pull ethereum/client-go
# mkdir /root/.ethereum
# screen -S Etherium_noda
# docker run -it -p 30303:30303 -p 8545:8545 -p 8546:8546 -p 30304:30304 -v /root/.ethereum/:/root/.ethereum/ ethereum/client-go --syncmode light --http --http.addr 0.0.0.0 --http.port 8545
```
https://www.freecodecamp.org/news/how-to-run-geth-from-a-docker-container-b6d30620ca74/ 
https://ethereum.org/ru/developers/tutorials/run-light-node-geth/

### 2. Deploy Forta node
#### 2.1 Get repositories and instal package
```
# curl https://dist.forta.network/pgp.public -o /usr/share/keyrings/forta-keyring.asc -s
# echo 'deb [signed-by=/usr/share/keyrings/forta-keyring.asc] https://dist.forta.network/repositories/apt stable main' | sudo tee -a /etc/apt/sources.list.d/forta.list
# apt-get update
# apt-get install forta
```
### 2.2 Initializate stage
```
# forta init --passphrase "your password"
Scanner address: 0x4751ca9aa2EaA551d26d1993A14BbE05a5404049

Successfully initialized at /root/.forta

- Please make sure that all of the values in config.yml are set correctly.
- Please fund your scanner address with some MATIC.
- Please enable it for the chain ID in your config by doing 'forta register --owner-address <your_owner_wallet_address>'.
root@vmi621203:~#
```

### 2.3 We should edit this file and point ot our Etherium service:
```
root@vmi621203:~# cat /root/.forta/config.yml |head -n20
# Auto generated by 'forta init' - safe to modify
# The chainId is the chainId of the network that is analyzed (1=mainnet)
chainId: 1

# The scan settings are used to retrieve the transactions that are analyzed
scan:
  jsonRpc:
    url: http://127.0.0.1:8545

# The trace endpoint must support trace_block (such as alchemy)
trace:
  jsonRpc:
    url: http://127.0.0.1:8545

# The registry settings are used to discover and load agents
```
### 2.4 Registering Forta node
We replenish our address in the Polygon network by 1 MATIC and check the balance:
https://polygonscan.com/address/0x4751ca9aa2EaA551d26d1993A14BbE05a5404049  

```
# forta register --owner-address 0x1418559Ea8b2d5A29Ce34A8c512c764F80A68D4A --passphrase "your password"
Sending a transaction to register your scan node to chain 1...
Successfully sent the transaction!

Please ensure that https://polygonscan.com/tx/0xbca62d6b2e4c2d9068b6ec1bc251c8b23d6cd31fe42b33df829beea62d5f6adf succeeds before you do 'forta run'. This can take a while depending on the network load.
root@vmi621203:~#
```
### 2.5 Node start
Before start I've edited and created these environment for my service:
To override systemd service environment, you can set the variables in /etc/systemd/system/forta.service.d/env.conf like:
```
[Service]
Environment="FORTA_DIR=<your_forta_config_dir>"
Environment="FORTA_PASSPHRASE=<your_forta_passphrase>"

Run the systemd service to start Forta

# systemctl enable forta
# systemctl start forta
```
### 2.6 Check status:
```
 # forta status
```
![image](https://user-images.githubusercontent.com/7540778/164965620-e7640965-9c12-4606-9570-3eeec49606d2.png)


### 3. Checking a logs
```
# journalctl -u forta -n20 --output cat
```
#### We should see somthing like this:
![image](https://user-images.githubusercontent.com/7540778/164965771-041e8e70-d252-475c-b3f4-7c3389faf0ac.png)

####check that all docker containres were started and are started:
```
# docker ps
```
![image](https://user-images.githubusercontent.com/7540778/164965835-60aaafb8-76b9-424c-b650-84c385ca4fe0.png)

#### check your node in the explorer lists here:
https://explorer.forta.network/network 
